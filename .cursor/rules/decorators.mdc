---
globs: src/modules/**/controllers/*.ts
---

# Common Decorators Usage Guidelines

This document outlines the usage of common decorators available in the project for controllers and routes.

## Available Decorators

### @CurrentUser()

Automatically extracts authenticated user information from the JWT token. **Never extract user data from the token manually** - use this decorator instead.

**Import:**

```typescript
import { CurrentUser } from '@src/common/decorators/current-user.decorator';
import { JwtUserDetailsDto } from '@src/common/dto/jwt-user-details.dto';
```

**Usage:**

```typescript
@Controller('users')
export class UsersController {
  @Get('profile')
  getProfile(@CurrentUser() user: JwtUserDetailsDto) {
    return this.service.findOne(user.id);
  }

  @Post()
  create(
    @Body() createDto: CreateUserRequestDto,
    @CurrentUser() user: JwtUserDetailsDto,
  ) {
    return this.service.create(createDto, user.id);
  }
}
```

**Important:**

- Always type as `JwtUserDetailsDto`
- Information is extracted automatically from JWT token
- Never use `@Req()` or manual token parsing

---

### @Public()

Makes the endpoint public by disabling JWT authentication.

```typescript
@Post('login')
@Public()
async login(@Body() loginDto: LoginDto) {
  return this.authService.login(loginDto);
}
```

---

### @CustomTimeout()

Sets a custom timeout for long-running operations.

```typescript
@Get('generate')
@CustomTimeout(30000) // 30 seconds
async generateReport() {
  return this.service.generate();
}
```

---

### @Roles()

Restricts access to the endpoint based on user roles.

```typescript
@Get('dashboard')
@Roles(RoleEnum.ADMIN)
async getDashboard() {
  return this.service.getDashboard();
}
```
